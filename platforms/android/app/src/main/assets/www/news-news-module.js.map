{"version":3,"sources":["webpack:///./src/app/pages/news/news.module.ts","webpack:///./src/app/pages/news/news.page.html","webpack:///./src/app/pages/news/news.page.scss","webpack:///./src/app/pages/news/news.page.ts"],"names":[],"mappings":"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","file":"news-news-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { Routes, RouterModule } from '@angular/router';\nimport { FormsModule,ReactiveFormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\nimport { IonicRatingModule } from 'ionic4-rating';//this is import package.\n\nimport { NewsPage } from './news.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: NewsPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    IonicRatingModule , \n    RouterModule.forChild(routes),\n    ReactiveFormsModule\n\n  ],\n  declarations: [NewsPage]\n})\nexport class NewsPageModule {}\n","module.exports = \"<ion-header>\\n  <ion-toolbar color=\\\"primary\\\">\\n    <ion-title>News</ion-title>\\n    <ion-buttons slot=\\\"end\\\">\\n      <ion-button routerLink=\\\"/login\\\" routerDirection=\\\"root\\\">\\n        <ion-icon slot=\\\"icon-only\\\" name=\\\"log-out\\\"></ion-icon>\\n      </ion-button>\\n    </ion-buttons>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content class=\\\"cardsize\\\">\\n  <ion-card *ngIf = \\\"role\\\">\\n    <ion-card-header>\\n      <ion-card-title>\\n      </ion-card-title>\\n\\n    </ion-card-header>\\n\\n    <ion-card-content>\\n\\n\\n<ion-button (click) = \\\"presentAlertPrompt()\\\">Add news</ion-button>\\n    </ion-card-content>\\n\\n  </ion-card>\\n  <ion-card text-center *ngFor=\\\"let item of news | async\\\">\\n    <ion-card-header>\\n      <ion-card-title>\\n        {{ item.title }}\\n\\n      </ion-card-title>\\n\\n    </ion-card-header>\\n\\n    <ion-card-content>\\n      <b>{{ item.description }}</b>\\n\\n\\n\\n    </ion-card-content>\\n\\n  </ion-card>\\n\\n\\n\\n\\n</ion-content>\\n\"","module.exports = \".cardsize {\\n  height: 50%; }\\n\\nrating {\\n  float: right; }\\n\\nrating ion-icon {\\n    color: gray; }\\n\\nrating ion-icon.filled {\\n      fill: #26ff00; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9zbGVldGVsZWN0cm9uaWNzL0RvY3VtZW50cy9hcHAgcHJvamVjdC9nb2xmbmV3L3NyYy9hcHAvcGFnZXMvbmV3cy9uZXdzLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLFdBQVUsRUFBQTs7QUFFZDtFQUNJLFlBQVksRUFBQTs7QUFEaEI7SUFHVSxXQUFXLEVBQUE7O0FBSHJCO01BT1ksYUFBYSxFQUFBIiwiZmlsZSI6InNyYy9hcHAvcGFnZXMvbmV3cy9uZXdzLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5jYXJkc2l6ZXtcbiAgICBoZWlnaHQ6NTAlO1xuICAgIH1cbnJhdGluZyB7XG4gICAgZmxvYXQ6IHJpZ2h0O1xuICAgICAgICBpb24taWNvbiB7XG4gICAgICAgICAgY29sb3I6IGdyYXk7XG4gICAgICBcbiAgICAgICAgICAmLmZpbGxlZCB7XG4gICAgICAgICAgICAvL2NvbG9yOiAjMjZmZjAwO1xuICAgICAgICAgICAgZmlsbDogIzI2ZmYwMDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0iXX0= */\"","import { Component, OnInit } from '@angular/core';\nimport { AngularFirestore, AngularFirestoreCollection, AngularFirestoreDocument } from '@angular/fire/firestore';\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { AuthService } from 'src/app/services/auth.service';\nimport { FormGroup, FormBuilder, Validators } from \"@angular/forms\";\nimport { NavController, AlertController } from '@ionic/angular';\n\nexport interface MyData {\n  // name: string;\n  title: string;\n  description: string;\n}\nexport interface MyData2 {\n  // name: string;\n  title: string;\n  review: string;\n}\n\n\n@Component({\n  selector: \"app-news\",\n  templateUrl: \"./news.page.html\",\n  styleUrls: [\"./news.page.scss\"]\n})\n\n\nexport class NewsPage implements OnInit {\n  news: Observable<MyData[]>;\n  reviewform: FormGroup;\n  reviews: Observable<MyData2[]>;\n  existingcust: boolean;\n  updaterating: string;\n  id: string;\n  firstname:string;\n  lastname:string;\n  role:boolean;\n  newtitle:string;\n  newdesc:string;\n  private imageCollection: AngularFirestoreCollection<MyData>;\n  private reviewsCollection: AngularFirestoreCollection<MyData2>;\n  // private usersCollection: AngularFirestoreDocument<MyData3>;\n\n  constructor(private alertController: AlertController,private navCtrl: NavController, private auth: AuthService, private fb: FormBuilder, private db: AngularFirestore) {\n    this.id = this.auth.getprofile();\n    this.imageCollection = db.collection<MyData>('news');\n    this.reviewsCollection = db.collection<MyData2>('reviews');\n    // this.usersCollection = db.collection<MyData3>('users').doc(this.id);\n\n    this.news = this.imageCollection.snapshotChanges().pipe(\n      map(actions => actions.map(a => {\n        const data = a.payload.doc.data() as MyData;\n        const id = a.payload.doc.id;\n        return { id, ...data };\n      }))\n    );\n    this.reviews = this.reviewsCollection.snapshotChanges().pipe(\n      map(actions => actions.map(a => {\n        const data = a.payload.doc.data() as MyData2;\n        const id = a.payload.doc.id;\n        return { id, ...data };\n      }))\n    );\n    this.id = this.auth.getprofile();\n    let documentRef = db.doc('users/' + this.id);\n\n    documentRef.get().subscribe((documentSnapshot) => {\n      if (documentSnapshot.exists) {\n        const data = documentSnapshot.data();\n        this.existingcust = data.customer;\n        this.firstname = data.first_name;\n        this.lastname = data.last_name;\n        if(data.role == \"ADMIN\"){\n          this.role=true;\n\n        }\n        else{\n          this.role=false;\n\n        }\n\n        console.log(`Data: ` + this.existingcust);\n      }\n    });\n    // this.users = this.usersCollection.get().forEach(\n    //   actions =>{\n    //     const data = actions.data();\n    //     const id = actions.id;\n    //     this.existingcust = data;\n    //     return { id, ...data };\n    //   }\n    // );\n    // console.log(this.existingcust);\n\n  }\n  addnews() {\n    \n    let news = {\n      title: this.newtitle ,\n      description: this.newdesc\n    };\n\n    this.db.collection('news').add(news);\n    this.navCtrl.navigateForward('news');\n  }\n  async presentAlertPrompt() {\n    const alert = await this.alertController.create({\n      header: 'Add news',\n      inputs: [\n        \n        {\n          name: 'titlenew',\n          placeholder: 'Title'\n        },\n        {\n          name: 'descnew',\n          placeholder: 'Description'\n        },\n      ],\n      buttons: [\n        {\n          text: 'Cancel',\n          role: 'cancel',\n          cssClass: 'secondary',\n          handler: () => {\n            console.log('Confirm Cancel');\n          }\n        }, {\n          text: 'Ok',\n          handler: data => {\n            this.newtitle = data.titlenew;\n            this.newdesc = data.descnew;\n\n            this.addnews();\n          }\n        }\n      ]\n    });\n\n    await alert.present();\n  }\n  ngOnInit() {\n    this.reviewform = this.fb.group({\n      review: ['', [Validators.required]],\n      stars: ['', [Validators.required]]\n\n    });\n  }\n  updatecustomer(){\n    this.existingcust = false;\n    return new Promise<any>((resolve, reject) => {\n      this.db.collection('users').doc(this.id).update({customer:this.existingcust})\n      .then(\n        res => resolve(res),\n        err => reject(err)\n      )\n    })\n  }\n  submitreview() {\n    \n    let reviewjson = {\n      review: this.reviewform.value.review,\n      stars: this.reviewform.value.stars,\n      title:this.firstname+\" \"+this.lastname\n    };\n\n    this.db.collection('reviews').add(reviewjson);\n    this.navCtrl.navigateForward('app/news');\nthis.updatecustomer();\n  }\n  onRateChange(event) {\n    console.log('Your rate:', event);\n  }\n  test() {\n    console.log(this.reviewform.value);\n  }\n}\n"],"sourceRoot":""}